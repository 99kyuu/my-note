<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>new Date() 使用</title>
        <style>
            *{ padding: 0; margin: 0; }
            .wrap{ width: 100%; max-width: 680px; margin: 0 auto; box-sizing: border-box; padding: 20px; text-align: center; }
        </style> 
    </head>
    <body>
        <div class="wrap"></div>

        <script>
            // 日期生成
            function dayJson() {
                var calendar = [],
                    minYears = new Date().getFullYear(),
                    maxYears = new Date().getFullYear() + 10,
                    monthCount = 1,
                    dayCount = 1;
                for (var i = minYears; i <= maxYears; i++) {
                    var _year = {}; // 这里的定义变量放在外面会导致变量key一直重复
                    _year.name = i.toString();
                    _year.sub = [];
                    for (var j = monthCount; j <= 12; j++) {
                        var _month = {};
                        _month.name = ('0' + j.toString()).slice(-2);
                        _month.sub = [];
                        _year.sub.push(_month);
                        dayCount = new Date(i, j, 0).getDate();
                        for (var k = 1; k <= dayCount; k++) {
                            _month.sub.push({
                                name: ('0' + k.toString()).slice(-2)
                            });
                        }
                    }
                    calendar.push(_year);
                }
                // 这里是限制不能选小于之前的日期
                calendar[0].sub.splice(0, new Date().getMonth());
                calendar[0].sub[0].sub.splice(0, new Date().getDate());
                return calendar;
            }

            /**
             * 时间生成器
             *  params: minInterval 时间（5分钟间隔）
            */
            function timeInterval(minInterval) {
                var arr = [],
                    minTotal = 0;
                while (minTotal < 1440) {
                    var hour = parseInt(minTotal / 60),
                        min = parseInt(minTotal % 60);
                    hour = ('0' + hour).slice(-2);
                    min = ('0' + min).slice(-2);
                    arr.push(hour + ':' + min);
                    minTotal += minInterval;
                }
                return arr;
            }
            // console.log(timeInterval(5));

            // 一般的做法
            function timeStr() {
                var _date = new Date();
                var hour = _date.getHours() < 10 ? '0' + _date.getHours() : _date.getHours(),
                    minute = _date.getMinutes() < 10 ? '0' + _date.getMinutes() : _date.getMinutes(),
                    second = _date.getSeconds() < 10 ? '0' + _date.getSeconds() : _date.getSeconds();
                // 字符串拼接
                var dayArr = _date.getFullYear() + '-' + (_date.getMonth() + 1) + '-' + _date.getDate(),
                    timeArr = hour + ':' + minute + ':' + second;
                console.log(dayArr, timeArr);
            }
            // 我的做法
            function timeFormat(_num = 0) {
                let _Appoint, _month, _day, _hour, _minute, _second, _date;
                // 指定天数 _num: 1时为昨天，2为前天，以此类推  增加天数则：new Date(new Date().getTime()+(_num*24*60*60*1000));
                _Appoint = new Date(new Date() - (_num * 24 * 60 * 60 * 1000));
                _month = ('0' + (_Appoint.getMonth() + 1)).slice(-2);
                _day = ('0' + _Appoint.getDate()).slice(-2);
                _hour = ('0' + _Appoint.getHours()).slice(-2);
                _minute = ('0' + _Appoint.getMinutes()).slice(-2);
                _second = ('0' + _Appoint.getSeconds()).slice(-2);
                _date = `${_Appoint.getFullYear()}-${_month}-${_day} ${_hour}:${_minute}:${_second}`
                return _date;
            }
            // console.log(`日期：${ timeFormat(2) }`);
            
            /**
             * 带天数的倒计时
             * times: 秒数
            */
            function countDown(times) {
                let timer = setInterval(() => {
                    if (times <= 0) return clearInterval(timer);
                    let day = 0, hour = 0, minute = 0, second = 0;
                    day = Math.floor(times / (3600 * 24));
                    hour = Math.floor(times / 3600) - (day * 24);
                    minute = Math.floor(times / 60) - (day * 24 * 60) - (hour * 60);
                    second = Math.floor(times) - (day * 24 * 3600) - (hour * 3600) - (minute * 60);
                    // 格式化
                    day = ('0' + day).slice(-2);
                    hour = ('0' + hour).slice(-2);
                    minute = ('0' + minute).slice(-2);
                    second = ('0' + second).slice(-2);
                    // 
                    console.log(day + '天:' + hour + '小时：' + minute + '分钟：' + second + '秒');
                    times--;
                }, 1000);
                
            }
            let _timeformat = (_num = 0) => {
                let _Appoint, _month, _day, _hour, _minute, _second, _date;
                _Appoint = new Date(new Date().getTime() + (_num * 24 * 3600 * 1000));
                _month = ('0' + (_Appoint.getMonth() + 1)).slice(-2);
                _day = ('0' + _Appoint.getDate()).slice(-2);
                _hour = ('0' + _Appoint.getHours()).slice(-2);
                _minute = ('0' + _Appoint.getMinutes()).slice(-2);
                _second = ('0' + _Appoint.getSeconds()).slice(-2);
                _date = `${_Appoint.getFullYear()}/${_month}/${_day} ${_hour}:${_minute}:${_second}`
                return _date;
            }
            // 获取明天10点的时间戳
            let times = _timeformat(1).slice(-8);
            let timef = _timeformat(1).split(times).join('10:00:00');
            // 计算秒数
            let start = new Date(_timeformat()).getTime(),
                end = new Date(timef).getTime();
            let num = Math.floor(((end - start) / 1000));
            console.log(num, timef);
            countDown(num)
        </script>
    </body>
</html>