<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>简单的路由</title>
    <style media="screen">
        *{ padding: 0; margin: 0; }
        ul,li{ list-style: none; }
        nav{ width: 200px; background: lightblue; margin: auto; }
        nav li{ line-height: 28px; text-align: center; }
        .wrap{ width: 300px; margin: auto; border: solid 2px orange; min-height: 200px; text-align: center; }
        .ul{ width: 100%; }
        .ul li{ background-color: #eee; line-height: 24px; }
        .ul li:nth-child(odd){ background: #fff; }
    </style>
</head>

<body>
    <nav>
        <li><a href="#/a">导航一</a></li>
        <li><a href="#/b">导航二</a></li>
        <li><a href="#/c">导航三</a></li>
    </nav>
    <!-- 路由渲染的位置 -->
    <div class="wrap">

    </div>
    <script type="text/javascript">
        function Router() {
          this.routes = {};
          this.currentUrl = '';
        }
        Router.prototype = {
            /**
             * 监听路由跳转
             * @param {string} path 路由路径
             * @param {Function} callback 路由回调
             */
            onchange: function(path, callback) {
                this.routes[path] = callback || function() {};
            },
            refresh: function() {
                this.currentUrl = location.hash.slice(1) || '/';
                // console.log(this.routes);
                // console.log(this.currentUrl);
                var fn = this.routes[this.currentUrl];
                if (typeof fn === 'function') fn();
            },
            init: function() {
                window.addEventListener('load', this.refresh.bind(this), false);
                window.addEventListener('hashchange', this.refresh.bind(this), false);
            }
        }
        var route = new Router();
        route.init();

        function addHtml(title, text) {
            var content = document.querySelector('.wrap');
            content.innerHTML = '<ul class="ul">\
                        <li>'+title+'</li>\
                        <li>'+text+'</li>\
                        <li>'+text+'</li>\
                        <li>'+text+'</li>\
                    </ul><strong>'+(new Date()).toString()+'</strong>';
        }
        route.onchange('/a', function() {
            addHtml('首页', '首页内容');
        });
        route.onchange('/b', function() {
            addHtml('子页面', '第二个页面内容');
        });
        route.onchange('/c', function() {
            addHtml('最后的页面', '嘿嘿');
        });
    </script>
</body>

</html>
